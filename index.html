<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="custom.css" />

  <script defer src="render.js"></script>

</head>

<body>
  <div class="container">
    <div class="main-body">
      <!-- Breadcrumb -->
      <nav aria-label="breadcrumb" class="main-breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item">
            <a href="javascript:void(0)">User</a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">
            User Profile
          </li>
        </ol>
      </nav>
      <!-- /Breadcrumb -->

      <div class="row gutters-sm">
        <div class="col-md-4 mb-3">
          <div class="card">
            <div class="card-body">
              <h4 class="d-flex align-items-center mb-3">My Classes</h4>
              <table id="course-list" class="table table-hover">
                <tbody id="course-list-body">
                  <!-- COURSE LIST -->

                </tbody>
              </table>
              <div class="d-flex align-items-center mb-2 mt-2">
                <input type="text" class="form-control" placeholder="Enter Professor..." id="professor" />
                <button type="button" id="add" class="btn btn-primary ms-1 text-nowrap">
                  <i class="bi bi-plus"></i> Add
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-8">
          <div class="card mb-3">
            <div class="card-body">
              <h4 class="d-flex align-items-center mb-3" id="courses">
                Lectures
              </h4>
              <table id="lecture-list" class="table table-hover">
                <thead>
                  <th scope="col">#</th>
                  <th scope="col">Title</th>
                  <th scope="col">Due</th>
                </thead>
                <tbody id="lecture-list-body">
                  <!-- LECTURE LIST -->
                </tbody>
              </table>
              <div class="row">
                <div class="ml-auto">
                  <button id="import" class="btn btn-outline-primary">
                    Import
                  </button>

                  <button id="summarize" class="btn btn-outline-primary">
                    Summarize
                  </button>

                  <div class="form-popup" id="myForm">
                    <form action="/action_page.php" class="form-container">
                      <label for="course"><b>Course</b></label>
                      <input type="text" placeholder="Enter Course name..." id="course-name" />
                      <label for="name"><b>Name</b></label>
                      <input type="text" placeholder="Enter lecture name..." id="lecture-name" />

                      <label for="week"><b>Week</b></label>
                      <input type="text" placeholder="Enter Week..." id="week" />

                      <label for="date"><b>Due Date</b></label>
                      <input type="date" id="date" />

                      <!-- move professor property to add class section -->
                      <!-- <label for="professor"><b>Professor</b></label>
                        <input
                          type="text"
                          placeholder="Enter Professor..."
                          id="professor"
                        /> -->

                      <label for="file"><b>Full-Transcription</b></label>
                      <input type="file" id="full-trans-file" required />
                      <label for="file"><b>Summary</b></label>
                      <input type="file" id="summary-file" required />

                      <hr />
                      <button type="button" class="btn" id="submit">
                        Submit
                      </button>
                      <button type="button" class="btn cancel" id="close">
                        Close
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row gutters-sm">
            <div class="col-sm-12 mb-3">
              <div class="card h-100">
                <div class="card-body">
                  <h6 class="d-flex align-items-center mb-3">
                    Your week is here:
                  </h6>
                  <div id="lecture-content">

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      //########################################################################
      //##############################################submit button에서 사용하는 summarize function 입력 값을 반영하도록 바꿀 필요가 있습니다.
      //summarizing
      // src = https://www.npmjs.com/package/@trashhalo/node-summarizer#meth
      async function lecture_summarizer(text_to_summarize) {
        let SummarizerManager = require("node-summarizer").SummarizerManager;

        //TODO-- get text from video
        text_to_summarize =
          "Boris Johnson has been issued with a county court judgement for allegedly failing to pay a debt.Court records show he was issued with the judgment for a figure of £535.Johnson's spokesman described the judgement against him as vexatious and spurious.The claim relates to an allegation of defamation, the Daily Mail reported.See more stories on Insider's business page.Boris Johnson has been issued with a county court judgement for an lleged unpaid debt.The judgement, revealed by the Private Eye magazine on Wednesday and seen by Insider, shows that the judgement against the UK Prime Minister came last October after failed to pay the debt of £535. Despite the order being issued more than six months ago, it is rated as an unsatisfied record, suggesting that it has not been paif by the prime minister. Johnson's Downing Street residence is listed on the court judgement. It is not clear what the alleged debt relates to, but such judgements are issued when a person or organisation takes action against someone claiming they owe them money and the person does not respond.However, a spokesman for Johnson said they were moving at speed to get this vexatious and spurious claim removed, adding that the courts do have the power to strike down vexatious claims.The Daily Mail reported that the claim came from a woman alleging defamation by the prime minister. Asked if the public should be worried about the prime minister's financial situation, a spokesperson replied you should not be worried, no. The judgement posed awkward questions for the prime minister, whose private financial arrangements have been under significant scrutiny in recent months."; //this is full-text from Google API
        let number_of_sentences = 3; //output lines

        let Summarizer = new SummarizerManager(
          text_to_summarize,
          number_of_sentences
        );

        //summarizing

        Summarizer.getSummaryByRank().then((summary_object) => {
          // return summary_object.summary;
          let summary = summary_object.summary;

          // lecture_summary.txt is tentative name, modify on your choice
          fs = require("fs");
          // TODO-- change output file name if you make summary text file
          fs.writeFileSync(
            "./src/lecture_summary.txt",
            summary,
            function (err) {
              if (err) return console.log(err);
            }
          );
          //debug
          console.log(summary);
        });
      }
      //##############################################

      //tentative functions
      //3. Summary/ Full-text change button
    </script>
</body>

</html>